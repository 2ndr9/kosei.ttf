{"version":3,"sources":["Loading.tsx","canvas.tsx","view.tsx","FontFace.tsx","index.tsx"],"names":["StyledDiv","styled","div","StyledDiv2","StyledText","text","StyledP","Loading","props","isLoading","type","color","height","width","PureCanvas","React","forwardRef","ref","canvasRef","mouseX","mouseY","getContext","current","useState","base64Data","setbase64Data","fontName","setFontName","setIsLoading","DrawEnd","e","canvas","toDataURL","Draw","x","y","ctx","beginPath","globalAlpha","moveTo","lineTo","lineCap","lineWidth","strokeStyle","stroke","id","onMouseDown","button","rect","getBoundingClientRect","clientX","left","clientY","top","onMouseMove","buttons","onMouseUp","onMouseOut","style","border","onClick","clearRect","window","innerWidth","margin","onSubmit","event","preventDefault","axios","post","base64","String","replace","font_name","then","res","console","log","location","href","display","required","maxLength","value","onChange","target","Canvas","useRef","useEffect","handleResize","innerHeight","addEventListener","removeEventListener","TextArea","textarea","View","className","FontFace","createGlobalStyle","Date","getTime","isChrome","isMobile","alert","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f8011e10.chunk.js","sourcesContent":["import styled from \"styled-components\";\nimport ReactLoading from \"react-loading\";\n\nconst StyledDiv = styled.div`\n  position: fixed;\n  background: rgba(100, 100, 100, 0.8);\n  inset: 0;\n  display: flex;\n  flex-direction: column;\n`;\n\n// margin-left: 40%;\nconst StyledDiv2 = styled.div`\n  margin-top: 20%;\n  margin-left: 40%;\n  width: 100%;\n`;\n\nconst StyledText = styled.text`\n  color: rgba(250, 250, 250, 1);\n  font-size: 27px;\n  text-align: center;\n  font-family: tsuno;\n`;\n\nconst StyledP = styled.text`\n  line-height: 2.5em;\n`;\n\nconst Loading = (props: any) => {\n  const isLoading = props.isLoading;\n\n  if (isLoading) {\n    return (\n      <StyledDiv>\n        <StyledDiv2>\n          <ReactLoading\n            type={\"bars\"}\n            color={\"white\"}\n            height={\"20%\"}\n            width={\"20%\"}\n          />\n        </StyledDiv2>\n        <StyledText>\n          <StyledP>Now Uploading...</StyledP>\n          <br />\n          <StyledP>アップロード中です</StyledP>\n          <br />\n          <StyledP>すこしお待ち下さい</StyledP>\n        </StyledText>\n      </StyledDiv>\n    );\n  } else {\n    return <div></div>;\n  }\n};\n\nexport default Loading;\n","import React, { useRef, useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Loading from \"./Loading\";\n\ninterface IRect {\n  width: number;\n  height: number;\n  left: number;\n  right: number;\n  top: number;\n  bottom: number;\n}\n\nconst PureCanvas = React.forwardRef((props, ref: any) => {\n  const canvasRef = ref;\n  let mouseX: number | null = null;\n  let mouseY: number | null = null;\n  const getContext = (): CanvasRenderingContext2D => {\n    const canvas: any = canvasRef.current;\n    return canvas.getContext(\"2d\");\n  };\n  const [base64Data, setbase64Data] = useState();\n  const [fontName, setFontName] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const OnClick = (e: React.MouseEvent<HTMLCanvasElement>) => {\n    if (e.button !== 0) {\n      return;\n    }\n    const canvas: any = canvasRef.current;\n    const rect: IRect = canvas.getBoundingClientRect();\n    const x = ~~(e.clientX - rect.left);\n    const y = ~~(e.clientY - rect.top);\n    Draw(x, y);\n  };\n\n  const OnMove = (e: React.MouseEvent<HTMLCanvasElement>) => {\n    if (e.buttons !== 1) {\n      return;\n    }\n    const canvas: any = canvasRef.current;\n    const rect: IRect = canvas.getBoundingClientRect();\n    const x = ~~(e.clientX - rect.left);\n    const y = ~~(e.clientY - rect.top);\n    Draw(x, y);\n  };\n\n  const DrawEnd = (e: React.MouseEvent<HTMLCanvasElement>) => {\n    const canvas: any = canvasRef.current;\n    mouseX = null;\n    mouseY = null;\n    setbase64Data(canvas.toDataURL(\"image/png\"));\n  };\n\n  const Draw = (x: number, y: number) => {\n    const ctx = getContext();\n    ctx.beginPath();\n    ctx.globalAlpha = 1.0;\n    if (mouseX === null || mouseY === null) {\n      ctx.moveTo(x, y);\n    } else {\n      ctx.moveTo(mouseX, mouseY);\n    }\n    ctx.lineTo(x, y);\n    ctx.lineCap = \"square\";\n    ctx.lineWidth = 8;\n    ctx.strokeStyle = \"#000000\";\n    ctx.stroke();\n    mouseX = x;\n    mouseY = y;\n  };\n\n  const Reset = () => {\n    const ctx = getContext();\n    ctx.clearRect(0, 0, window.innerWidth, window.innerWidth);\n\n    const canvas: any = canvasRef.current;\n    setbase64Data(canvas.toDataURL(\"image/png\"));\n  };\n\n  const handleSubmit = (event: any) => {\n    event.preventDefault();\n\n    setIsLoading(true);\n\n    axios\n      .post(\"https://18.180.152.54/\", {\n        base64: String(base64Data).replace(/^.*,/, \"\"),\n        font_name: fontName,\n      })\n      .then((res) => {\n        setIsLoading(false);\n        console.log(res);\n        window.location.href = window.location.href;\n      });\n  };\n\n  return (\n    <div>\n      <Loading isLoading={isLoading}></Loading>\n      <canvas\n        id=\"canvas\"\n        onMouseDown={OnClick}\n        onMouseMove={OnMove}\n        onMouseUp={DrawEnd}\n        onMouseOut={DrawEnd}\n        ref={canvasRef}\n        style={{\n          border: \"2px solid\",\n        }}\n      />\n      <button onClick={Reset} style={{ margin: \"5px\" }}>\n        リセット\n      </button>\n      <form onSubmit={handleSubmit} style={{ display: \"flex\" }}>\n        <p>\n          更新する文字:{\" \"}\n          <input\n            type=\"text\"\n            required\n            maxLength={1}\n            value={fontName}\n            onChange={(event) => setFontName(event.target.value)}\n          />\n        </p>\n        <button type=\"submit\" style={{ margin: \"15px\" }}>\n          アップロード\n        </button>\n      </form>\n    </div>\n  );\n});\n\nconst Canvas: React.FC = () => {\n  let canvasRef = useRef<HTMLCanvasElement | null>(null);\n\n  useEffect(() => {\n    const ctx1: any = canvasRef.current!;\n    const ctx = ctx1.getContext(\"2d\");\n\n    const handleResize = () => {\n      ctx.canvas.height =\n        window.innerHeight > window.innerWidth * 2\n          ? window.innerWidth * 0.9\n          : (((window.innerWidth * window.innerHeight) / window.innerWidth) *\n              0.9) /\n            2;\n      ctx.canvas.width =\n        window.innerHeight > window.innerWidth * 2\n          ? window.innerWidth * 0.9\n          : (((window.innerWidth * window.innerHeight) / window.innerWidth) *\n              0.9) /\n            2;\n    };\n\n    handleResize();\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return (\n    <div>\n      <PureCanvas ref={canvasRef} />\n    </div>\n  );\n};\n\nexport default Canvas;\n","import React from \"react\";\n\nimport styled from \"styled-components\";\n\nconst TextArea = styled.textarea`\n  font-family: \"tsuno\";\n  width: 100%;\n  height: 100%;\n  font-size: 40px;\n`;\n\nconst View: React.FC = (props) => {\n  return (\n    <section style={{ height: \"100%\" }}>\n      <h1 className=\"tsuno\"></h1>\n      <p>自由入力欄</p>\n      <TextArea />\n    </section>\n  );\n};\n\nexport default View;\n","import { createGlobalStyle } from \"styled-components\";\n\nconst FontFace = createGlobalStyle`\n@font-face {\n  font-family: \"tsuno\";\n  src: url(\"https://font-a.s3.ap-northeast-1.amazonaws.com/a.ttf?${new Date().getTime()}\")\n    format(\"opentype\");\n}\n\nbody, input, select, button{\n  font-family:tsuno\n}\n\n#root{\n  height:\"100%\";\n}\n`;\n\nexport default FontFace;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Canvas from \"./canvas\";\nimport View from \"./view\";\nimport FontFace from \"./FontFace\";\n// import \"./index.css\";\n\nimport { isChrome, isMobile } from \"react-device-detect\";\n\nif (!isChrome || isMobile) {\n  alert(\"Google Chromeで開いてください\");\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <FontFace></FontFace>\n    <Canvas></Canvas>\n    <View></View>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}